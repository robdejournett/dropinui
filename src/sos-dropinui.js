var setupId="",dropInUIDivId="drop-in-ui",intervalRef;(function(){this.SOSInquiryForm=function(g,d){g&&"object"===typeof g?AttachInquiryForm(g,d):alert("Error calling this object")}})();
var bootswatchThemes={Default:"https://bootswatch.com/_vendor/bootstrap/dist/css/bootstrap.css",Cerulean:"https://bootswatch.com/4/cerulean/bootstrap.css",Cosmo:"https://bootswatch.com/4/cosmo/bootstrap.css",Cyborg:"https://bootswatch.com/4/cyborg/bootstrap.css",Darkly:"https://bootswatch.com/4/darkly/bootstrap.css",Flatly:"https://bootswatch.com/4/flatly/bootstrap.css",Pulse:"https://bootswatch.com/4/pulse/bootstrap.css"};
function AttachInquiryForm(g,d){var b=bootswatchThemes.Default;if(g.hasOwnProperty("theme")){var a=g.theme;bootswatchThemes[a]&&(b=bootswatchThemes[a])}if(g.hasOwnProperty("id")&&g.hasOwnProperty("setupId")){(a=document.getElementById("mainStyleSheet"))&&a.remove();a=document.createElement("link");a.id="mainStyleSheet";a.setAttribute("rel","stylesheet");a.setAttribute("href",b);document.getElementsByTagName("head")[0].appendChild(a);b=document.createElement("style");b.innerHTML=".hide{opacity: 0.4;} .section-heading{color: #8b0000;} .a, .section-heading:hover{color: #670303;} .row-label{color: #565353;font-weight: bold;} .row-value{color:#156d99 !important;font-weight: bold;} .row-message{font-style: italic; font-size: 10px; margin-left: 1.5rem !important;}";
document.getElementsByTagName("head")[0].appendChild(b);dropInUIDivId=g.id;setupId=g.setupId;b=document.getElementById(dropInUIDivId);b.innerHTML="";b.classList.add("hide");a=document.createElement("div");a.id="drop-in-ui-loader";a.classList.add("spinner-border","text-primary","cgx-spinner");a.setAttribute("role","status");a.setAttribute("style","position: absolute;margin: auto;top: 0;left: 0;bottom: 0;right: 0;");var c=document.createElement("span");c.classList.add("sr-only");c.innerText="Loading...";
a.appendChild(c);b.parentNode.insertBefore(a,b.nextSibling)}var k;g.hasOwnProperty("done")&&(k=g.done);attachInquiryForm(setupId,k,d)}
function attachInquiryForm(g,d,b){var a=document.createElement("label");a.setAttribute("for","MemberId");a.innerText="Memeber ID";var c=document.createElement("input");c.classList.add("form-control");c.setAttribute("type","text");c.id="MemberId";c.name="Request.MemberId";b&&b.hasOwnProperty("patient-member-id")&&(c.value=b["patient-member-id"]);var k=document.createElement("div");k.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");k.appendChild(a);k.appendChild(c);a=document.createElement("label");
a.setAttribute("for","PatientFirstName");a.innerText="First Name";var e=document.createElement("input");e.classList.add("form-control");e.setAttribute("type","text");e.setAttribute("placeholder","First");e.id="PatientFirstName";e.name="Request.PatientFirstName";b&&b.hasOwnProperty("patient-first-name")&&(e.value=b["patient-first-name"]);c=document.createElement("div");c.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");c.appendChild(a);c.appendChild(e);a=document.createElement("label");
a.setAttribute("for","PatientLastName");a.innerText="Last Name";var h=document.createElement("input");h.classList.add("form-control");h.setAttribute("type","text");h.setAttribute("placeholder","Last");h.id="PatientLastName";h.name="Request.PatientLastName";b&&b.hasOwnProperty("patient-last-name")&&(h.value=b["patient-last-name"]);e=document.createElement("div");e.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");e.appendChild(a);e.appendChild(h);a=document.createElement("label");a.setAttribute("for",
"PatientDOB");a.innerText="DOB";var f=document.createElement("input");f.classList.add("form-control");f.setAttribute("type","text");f.setAttribute("placeholder","MM/DD/YYYY");f.id="PatientDOB";f.name="Request.PatientDOB";b&&b.hasOwnProperty("patient-dob")&&(f.value=b["patient-dob"]);h=document.createElement("div");h.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");h.appendChild(a);h.appendChild(f);a=document.createElement("label");a.setAttribute("for","Location");a.innerText="State";
var l=document.createElement("select");l.classList.add("form-control");l.id="PatientStateCode";l.name="Request.PatientStateCode";f=document.createElement("div");f.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");f.appendChild(a);f.appendChild(l);a=document.createElement("div");a.classList.add("row");l=document.createElement("div");l.classList.add("col-12");l.innerHTML="<small class='text-muted'>Patient</small>";a.appendChild(l);a.appendChild(k);a.appendChild(c);a.appendChild(e);a.appendChild(h);
a.appendChild(f);c=document.createElement("label");c.setAttribute("for","HCPCSCodes");c.innerText="HCPCS";e=document.createElement("input");e.classList.add("form-control");e.setAttribute("type","text");e.id="HCPCSCodes";e.name="Request.HCPCSCodes";b&&b.hasOwnProperty("hcpcs-codes")&&(e.value=b["hcpcs-codes"]);k=document.createElement("div");k.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");k.appendChild(c);k.appendChild(e);c=document.createElement("label");c.setAttribute("for","DOSStart");
c.innerText="DOS Start Date";h=document.createElement("input");h.classList.add("form-control");h.setAttribute("type","text");h.setAttribute("placeholder","MM/DD/YYYY");h.id="DOSStart";h.name="Request.DOSStart";b&&b.hasOwnProperty("dos-start-date")&&(h.value=b["dos-start-date"]);e=document.createElement("div");e.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");e.appendChild(c);e.appendChild(h);c=document.createElement("label");c.setAttribute("for","DOSEnd");c.innerText="DOS End Date";
f=document.createElement("input");f.classList.add("form-control");f.setAttribute("type","text");f.setAttribute("placeholder","MM/DD/YYYY");f.id="DOSEnd";f.name="Request.DOSEnd";b&&b.hasOwnProperty("dos-end-date")&&(f.value=b["dos-end-date"]);h=document.createElement("div");h.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");h.appendChild(c);h.appendChild(f);c=document.createElement("label");c.setAttribute("for","Location");c.innerText="Location";l=document.createElement("select");l.classList.add("form-control");
l.id="Location";l.name="Request.Location";b&&b.hasOwnProperty("location")&&(l.value=b.location);f=document.createElement("div");f.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");f.appendChild(c);f.appendChild(l);c=document.createElement("label");c.setAttribute("for","MRN");c.innerText="Ref.Id/MRN";var m=document.createElement("input");m.classList.add("form-control");m.setAttribute("type","text");m.id="MRN";m.name="Request.MRN";b&&b.hasOwnProperty("mrn")&&(m.value=b.mrn);l=document.createElement("div");
l.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");l.appendChild(c);l.appendChild(m);m=document.createElement("input");m.setAttribute("type","hidden");m.id="RequestSource";m.name="Request.RequestSource";m.setAttribute("value","SOS DropInUI");c=document.createElement("div");c.classList.add("row");var n=document.createElement("div");n.classList.add("col-12");n.innerHTML="<small class='text-muted'>Other Details</small>";c.appendChild(n);c.appendChild(k);c.appendChild(e);c.appendChild(h);
c.appendChild(f);c.appendChild(l);c.appendChild(m);k=document.createElement("button");k.innerText="Verify";k.classList.add("btn","btn-primary");k.setAttribute("type","button");k.setAttribute("onclick","verifyInquiry('"+setupId+"',"+d+")");k.id="verify-btn";d=document.createElement("div");d.id="btnCol";d.classList.add("col-12");d.appendChild(k);k=document.createElement("div");k.classList.add("row","mt-2");k.appendChild(d);d=document.createTextNode("Same Or Similar Request");e=document.createElement("hr");
h=document.createElement("span");h.setAttribute("aria-hidden","true");h.innerHTML="&times;";f=document.createElement("button");f.setAttribute("type","button");f.setAttribute("class","btn-close");f.setAttribute("aria-label","close");f.setAttribute("onclick","hideAlert('DangerAlert')");l=document.createElement("span");l.id="DangerAlertMessage";h=document.createElement("div");h.style.display="none";h.classList.add("alert","alert-danger","alert-dismissible","fade","show");h.id="DangerAlert";h.appendChild(l);
h.appendChild(f);f=document.createElement("form");f.id="inquiryForm";f.setAttribute("method","post");f.appendChild(h);f.appendChild(a);f.appendChild(e);f.appendChild(c);f.appendChild(k);a=document.createElement("div");a.classList.add("card-body");a.appendChild(f);k=document.createElement("div");k.classList.add("card-header");k.appendChild(d);d=document.createElement("div");d.classList.add("card","border-light","md-3");d.appendChild(k);d.appendChild(a);a=document.getElementById(dropInUIDivId);a.appendChild(d);
d=document.createElement("div");d.id="mainDiv";d.classList.add("row");document.getElementById("drop-in-ui-loader").style.display="none";document.getElementById(dropInUIDivId).classList.remove("hide");a.appendChild(d);b&&b.hasOwnProperty("location")?attachLocations(g,b.location):attachLocations(g);b&&b.hasOwnProperty("state-code")?attachStates(g,b["state-code"]):attachStates(g);attachHCPCS(g)}
function attachLocations(g,d){$.ajax({url:"https://premium.pverify.com/Component/GetClientUserLocations?setupId="+g,type:"POST",success:function(b){if(b.Result){var a=$("#Location");b.Data.forEach(function(c){a.append($("<option></option>").attr("value",c.Name).text(c.Name))});d&&$("#Location").val(d)}else $("#DangerAlertMessage").html(b.Message),$("#DangerAlert").fadeIn(),setTimeout(function(){hideAlert("DangerAlert")},6E3)}})}
function attachStates(g,d){$.ajax({url:"https://premium.pverify.com/Component/GetStates?setupId="+g,type:"POST",success:function(b){console.log(b);if(b.Result){var a=$("#PatientStateCode");b.Data.forEach(function(c){a.append($("<option></option>").attr("value",c.StateCode).text(c.State))});d&&$("#PatientStateCode").val(d)}else $("#DangerAlertMessage").html(b.Message),$("#DangerAlert").fadeIn(),setTimeout(function(){hideAlert("DangerAlert")},6E3)}})}
function attachHCPCS(g){$.ajax({url:"https://premium.pverify.com/Component/GetRegisteredLCodes?setupId="+g,type:"POST",success:function(d){d.Result&&$("#HCPCSCodes").val(d.Data)}})}
function verifyInquiry(g,d){var b=document.getElementById(dropInUIDivId);b.classList.add("hide");var a=document.getElementById("drop-in-ui-loader");a.style.display="";$.ajax({url:"https://premium.pverify.com/Component/SOSVerifyForDropInUI?setupId="+g,type:"POST",data:$("#inquiryForm").serialize(),success:function(c){if(c.Result){$(".form-control").prop("disabled","disabled");d(c.Data);appendResponse(c.Data);var k=document.getElementById("btnCol");document.getElementById("verify-btn").remove();document.createElement("div").classList.add("row");
document.createElement("div").classList.add("col-12");intervalRef=setInterval(function(){getSOSResponse(c.Data.RequestId,g,d)},6E4);var e=document.createElement("input");e.setAttribute("type","button");e.classList.add("btn","btn-primary");e.setAttribute("onclick","getSOSResponse("+c.Data.RequestId+",'"+g+"',"+d+")");e.setAttribute("value","Get Result");k.appendChild(e)}else $("#DangerAlertMessage").html(c.Message),$("#DangerAlert").fadeIn(),setTimeout(function(){hideAlert("DangerAlert")},6E3);b.classList.remove("hide");
a.style.display="none"}})}
function appendResponse(g){var d=document.createElement("div");d.classList.add("row");d.id="sosResult";var b=document.createElement("div");b.classList.add("col-12");var a=document.createElement("div");a.innerText=g.APIResponseMessage.replace("Please search for the results using Request Id in the search page after the expected response time is over.","");b.appendChild(a);d.appendChild(b);b=document.getElementById(dropInUIDivId);b.appendChild(d);3!=g.APIResponseCode&&0!=g.APIResponseCode?a.classList.add("alert",
"alert-danger"):a.classList.add("alert","alert-success");if(3!=g.APIResponseCode){d=document.createElement("div");d.classList.add("card","mt-4");a=document.createElement("div");a.classList.add("card-header");a.innerText="Detail Results";b=document.createElement("div");b.classList.add("card-body","table-responsive");var c=document.createElement("table");c.classList.add("table");tr1=document.createElement("tr");tr1.classList.add("table-info");tblColHeadings="HCPCS;Category;DOS Start;Unit;Supplier;Name;Phone;Status;Notes/Error;Same Category HCPCS Billed".split(";");
tblValueResponseKeys="HCPCS CategoryName DOSStart Unit SupplierName Phone Status Message SameCategoryBilled".split(" ");tblColHeadings.forEach(function(k){var e=document.createElement("th");e.innerText=k;tr1.appendChild(e)});c.appendChild(tr1);g.Claims&&g.Claims.forEach(function(k){tr2=document.createElement("tr");tblValueResponseKeys.forEach(function(e){var h=document.createElement("td");h.innerText=k[e];tr2.appendChild(h)});c.appendChild(tr2)});b.appendChild(c);d.appendChild(a);d.appendChild(b);
b=document.getElementById(dropInUIDivId);b.appendChild(d)}}
function getSOSResponse(g,d,b){var a=document.getElementById("sosResult");a&&a.remove();var c=document.getElementById(dropInUIDivId);c.classList.add("hide");var k=document.getElementById("drop-in-ui-loader");k.style.display="";$.ajax({url:"https://premium.pverify.com/Component/GetSOSResponse?requestId="+g+"&setupId="+d,type:"GET",success:function(e){e.Result?(0==e.Data.APIResponseCode&&clearInterval(intervalRef),b(e.Data),appendResponse(e.Data)):($("#DangerAlertMessage").html(e.Message),$("#DangerAlert").fadeIn(),
setTimeout(function(){hideAlert("DangerAlert")},6E3));c.classList.remove("hide");k.style.display="none"}})}function hideAlert(g){document.getElementById(g).style.display="none"};