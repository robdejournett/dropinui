var setupId="",dropInUIDivId="drop-in-ui",intervalRef;(function(){this.MBIInquiryForm=function(h,e){h&&"object"===typeof h?AttachInquiryForm(h,e):alert("Error calling this object")}})();
var bootswatchThemes={Default:"https://bootswatch.com/_vendor/bootstrap/dist/css/bootstrap.css",Cerulean:"https://bootswatch.com/4/cerulean/bootstrap.css",Cosmo:"https://bootswatch.com/4/cosmo/bootstrap.css",Cyborg:"https://bootswatch.com/4/cyborg/bootstrap.css",Darkly:"https://bootswatch.com/4/darkly/bootstrap.css",Flatly:"https://bootswatch.com/4/flatly/bootstrap.css",Pulse:"https://bootswatch.com/4/pulse/bootstrap.css"};
function AttachInquiryForm(h,e){var a=bootswatchThemes.Default;if(h.hasOwnProperty("theme")){var b=h.theme;bootswatchThemes[b]&&(a=bootswatchThemes[b])}if(h.hasOwnProperty("id")&&h.hasOwnProperty("setupId")){(b=document.getElementById("mainStyleSheet"))&&b.remove();b=document.createElement("link");b.id="mainStyleSheet";b.setAttribute("rel","stylesheet");b.setAttribute("href",a);document.getElementsByTagName("head")[0].appendChild(b);a=document.createElement("style");a.innerHTML=".hide{opacity: 0.4;} .section-heading{color: #8b0000;} .a, .section-heading:hover{color: #670303;} .row-label{color: #565353;font-weight: bold;} .row-value{color:#156d99 !important;font-weight: bold;} .row-message{font-style: italic; font-size: 10px; margin-left: 1.5rem !important;}";
document.getElementsByTagName("head")[0].appendChild(a);dropInUIDivId=h.id;setupId=h.setupId;a=document.getElementById(dropInUIDivId);a.innerHTML="";a.classList.add("hide");b=document.createElement("div");b.id="drop-in-ui-loader";b.classList.add("spinner-border","text-primary","cgx-spinner");b.setAttribute("role","status");b.setAttribute("style","position: absolute;margin: auto;top: 0;left: 0;bottom: 0;right: 0;");var d=document.createElement("span");d.classList.add("sr-only");d.innerText="Loading...";
b.appendChild(d);a.parentNode.insertBefore(b,a.nextSibling)}var f;h.hasOwnProperty("done")&&(f=h.done);attachInquiryForm(setupId,f,e)}
function attachInquiryForm(h,e,a){var b=document.createElement("label");b.setAttribute("for","ProviderName");b.innerText="Provider Name";var d=document.createElement("select");d.classList.add("form-control");d.id="ProviderName";d.name="Request.ProviderId";var f=document.createElement("div");f.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");f.appendChild(b);f.appendChild(d);b=document.createElement("label");b.setAttribute("for","ProviderLastName");b.innerText="Last Name";var c=document.createElement("input");
c.classList.add("form-control");c.setAttribute("type","text");c.id="ProviderLastName";c.name="Request.ProviderLastName";a&&a.hasOwnProperty("provider-last-name")&&(c.value=a["provider-last-name"]);d=document.createElement("div");d.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");d.appendChild(b);d.appendChild(c);b=document.createElement("label");b.setAttribute("for","ProviderNPI");b.innerText="NPI";var g=document.createElement("input");g.classList.add("form-control");g.setAttribute("type",
"text");g.id="ProviderNPI";g.name="Request.ProviderNPI";a&&a.hasOwnProperty("npi")&&(g.value=a.npi);c=document.createElement("div");c.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");c.appendChild(b);c.appendChild(g);b=document.createElement("div");b.classList.add("row");b.appendChild(f);b.appendChild(d);b.appendChild(c);f=document.createElement("label");f.setAttribute("for","PatientSSN");f.innerText="SSN";c=document.createElement("input");c.classList.add("form-control");c.setAttribute("type",
"text");c.id="PatientSSN";c.name="Request.PatientSSN";a&&a.hasOwnProperty("patient-ssn")&&(c.value=a["patient-ssn"]);d=document.createElement("div");d.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");d.appendChild(f);d.appendChild(c);f=document.createElement("label");f.setAttribute("for","PatientFirstName");f.innerText="First Name";g=document.createElement("input");g.classList.add("form-control");g.setAttribute("type","text");g.setAttribute("placeholder","First");g.id="PatientFirstName";
g.name="Request.PatientFirstName";a&&a.hasOwnProperty("patient-first-name")&&(g.value=a["patient-first-name"]);c=document.createElement("div");c.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");c.appendChild(f);c.appendChild(g);f=document.createElement("label");f.setAttribute("for","PatientLastName");f.innerText="Last Name";var m=document.createElement("input");m.classList.add("form-control");m.setAttribute("type","text");m.setAttribute("placeholder","Last");m.id="PatientLastName";
m.name="Request.PatientLastName";a&&a.hasOwnProperty("patient-last-name")&&(m.value=a["patient-last-name"]);g=document.createElement("div");g.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");g.appendChild(f);g.appendChild(m);f=document.createElement("label");f.setAttribute("for","PatientDOB");f.innerText="DOB";var k=document.createElement("input");k.classList.add("form-control");k.setAttribute("type","text");k.setAttribute("placeholder","MM/DD/YYYY");k.id="PatientDOB";k.name="Request.PatientDOB";
a&&a.hasOwnProperty("patient-dob")&&(k.value=a["patient-dob"]);m=document.createElement("div");m.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");m.appendChild(f);m.appendChild(k);k=document.createElement("input");k.setAttribute("type","hidden");k.id="RequestSource";k.name="Request.RequestSource";k.setAttribute("value","MBI DropInUI");f=document.createElement("div");f.classList.add("row");var l=document.createElement("div");l.classList.add("col-12");l.innerHTML="<small class='text-muted'>Patient</small>";
f.appendChild(l);f.appendChild(d);f.appendChild(c);f.appendChild(g);f.appendChild(m);f.appendChild(k);d=document.createElement("label");d.setAttribute("for","Location");d.innerText="Location";g=document.createElement("select");g.classList.add("form-control");g.id="Location";g.name="Request.Location";c=document.createElement("div");c.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");c.appendChild(d);c.appendChild(g);d=document.createElement("div");d.classList.add("row");g=document.createElement("div");
g.classList.add("col-12");g.innerHTML="<small class='text-muted'>Other Details</small>";d.appendChild(g);d.appendChild(c);c=document.createElement("label");c.setAttribute("for","MRN");c.innerText="Ref.Id/MRN";g=document.createElement("input");g.classList.add("form-control");g.setAttribute("type","text");g.id="MRN";g.name="Request.MRN";a&&a.hasOwnProperty("mrn")&&(g.value=a.mrn);m=document.createElement("div");m.classList.add("col-lg-3","col-md-4","col-sm-6","col-12","mb-2");m.appendChild(c);m.appendChild(g);
d.appendChild(m);c=document.createElement("button");c.innerText="Verify";c.classList.add("btn","btn-primary");c.setAttribute("type","button");c.setAttribute("onclick","verifyInquiry('"+setupId+"',"+e+")");c.id="verify-btn";e=document.createElement("div");e.id="btnCol";e.classList.add("col-12");e.appendChild(c);c=document.createElement("div");c.classList.add("row","mt-2");c.appendChild(e);e=document.createTextNode("MBI Request");g=document.createElement("hr");m=document.createElement("hr");k=document.createElement("span");
k.setAttribute("aria-hidden","true");k.innerHTML="&times;";l=document.createElement("button");l.setAttribute("type","button");l.setAttribute("class","btn-close");l.setAttribute("aria-label","close");l.appendChild(k);l.setAttribute("onclick","hideAlert()");l=document.createElement("span");l.id="DangerAlertMessage";k=document.createElement("div");k.style.display="none";k.classList.add("alert","alert-danger","alert-dismissible","fade","show");k.id="DangerAlert";k.appendChild(l);l=document.createElement("form");
l.id="inquiryForm";l.setAttribute("method","post");l.appendChild(k);l.appendChild(b);l.appendChild(g);l.appendChild(f);l.appendChild(m);l.appendChild(d);l.appendChild(c);b=document.createElement("div");b.classList.add("card-body");b.appendChild(l);f=document.createElement("div");f.classList.add("card-header");f.appendChild(e);e=document.createElement("div");e.classList.add("card","border-light","md-3");e.appendChild(f);e.appendChild(b);b=document.getElementById(dropInUIDivId);b.appendChild(e);e=document.createElement("div");
e.id="mainDiv";e.classList.add("row");document.getElementById("drop-in-ui-loader").style.display="none";document.getElementById(dropInUIDivId).classList.remove("hide");b.appendChild(e);a&&a.hasOwnProperty("location")?attachLocations(h,a.location):attachLocations(h);AttachProviders(h)}
function AttachProviders(h){var e=$("#ProviderName");e.append($("<option></option>").attr("value","0"));$.ajax({url:"https://premium.pverify.com/Component/GetMBIProviders?setupId="+h,type:"POST",success:function(a){console.log(a);a.Result?(a.Data.forEach(function(b){e.append($("<option></option>").attr("value",b.NPI).text(b.LastName))}),$("#ProviderName").change(function(){$("#ProviderNPI").val($(this).val());$("#ProviderLastName").val($("#ProviderName > option:selected").text())})):($("#DangerAlertMessage").html(a.Message),
$("#DangerAlert").fadeIn(),setTimeout(function(){hideAlert("DangerAlert")},6E3))}})}
function attachLocations(h,e){$.ajax({url:"https://premium.pverify.com/Component/GetClientUserLocations?setupId="+h,type:"POST",success:function(a){if(a.Result){var b=$("#Location");a.Data.forEach(function(d){d.IsDefault?b.append($("<option selected></option>").attr("value",d.Name).text(d.Name)):b.append($("<option></option>").attr("value",d.Name).text(d.Name));e&&$("#Location").val(e)})}else $("#DangerAlertMessage").html(a.Message),$("#DangerAlert").fadeIn(),setTimeout(function(){hideAlert("DangerAlert")},
6E3)}})}
function verifyInquiry(h,e){var a=document.getElementById(dropInUIDivId);a.classList.add("hide");var b=document.getElementById("drop-in-ui-loader");b.style.display="";$.ajax({url:"https://premium.pverify.com/Component/MBIVerifyForDropInUI?setupId="+h,type:"POST",data:$("#inquiryForm").serialize(),success:function(d){d.Result?($(".form-control").prop("disabled","disabled"),e(d.Data),appendResponse(d.Data),document.getElementById("btnCol"),document.getElementById("verify-btn").remove(),document.createElement("div").classList.add("row"),document.createElement("div").classList.add("col-12"),
e(d.Data)):($("#DangerAlertMessage").html(d.Message),$("#DangerAlert").fadeIn(),setTimeout(function(){hideAlert("DangerAlert")},6E3));a.classList.remove("hide");b.style.display="none"}})}
function appendResponse(h){var e=document.createElement("div");e.classList.add("row");e.id="mbiResult";var a=document.createElement("div");a.classList.add("col-12");var b=document.createElement("div");b.innerText=h.APIResponseMessage.replace("Please search for the results using Request Id in the search page after the expected response time is over.","");a.appendChild(b);e.appendChild(a);a=document.getElementById(dropInUIDivId);a.appendChild(e);3!=h.APIResponseCode&&0!=h.APIResponseCode?b.classList.add("alert",
"alert-danger"):b.classList.add("alert","alert-success");if(3!=h.APIResponseCode){e=document.createElement("div");e.classList.add("card","mt-4");b=document.createElement("div");b.classList.add("card-header");b.innerText="Detail Results";a=document.createElement("div");a.classList.add("card-body","table-responsive");var d=document.createElement("table");d.classList.add("table");tr1=document.createElement("tr");tr1.classList.add("table-info");tr2=document.createElement("tr");tblColHeadings="First Name;Last Name;DOB;SSN;MBI;Error".split(";");
tblValueResponseKeys="PatientFirstName PatientLastName PatientDOB PatientSSN MBI ExpectedTimeInSeconds".split(" ");tblColHeadings.forEach(function(f){var c=document.createElement("th");c.innerText=f;tr1.appendChild(c)});d.appendChild(tr1);tblValueResponseKeys.forEach(function(f){var c=document.createElement("td");c.innerText=h[f];tr2.appendChild(c)});d.appendChild(tr2);a.appendChild(d);e.appendChild(b);e.appendChild(a);a=document.getElementById(dropInUIDivId);a.appendChild(e)}}
function hideAlert(h){document.getElementById(h).style.display="none"};